"use strict";(self.webpackChunkchallenger=self.webpackChunkchallenger||[]).push([[276],{3276:(H,h,t)=>{t.r(h),t.d(h,{SearchModule:()=>O});var i=t(6895),p=t(2295),v=t(2101),u=t(9653),g=t(5698),y=t(9300),e=t(4650),x=t(1148),C=t(3940),s=t(4006),F=t(8372),T=t(1884),Z=t(727),l=t(7392),m=t(9549),I=t(4144);let L=(()=>{class o{constructor(){this.subscriptions=new Z.w0,this.newSearch=new e.vpe,this.searchForm=new s.cw({search:new s.NI("",s.kI.minLength(3))})}ngOnInit(){this.subscriptions.add(this.searchForm.controls?.search?.valueChanges.pipe((0,F.b)(400),(0,T.x)()).subscribe(n=>this.newSearch.emit(n??"")))}handleEnter(){this.newSearch.emit(this.searchForm.controls?.search?.value??"")}ngOnDestroy(){this.subscriptions.unsubscribe()}}return o.\u0275fac=function(n){return new(n||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-search-input"]],inputs:{icon:"icon",placeholder:"placeholder"},outputs:{newSearch:"newSearch"},decls:5,vars:3,consts:[[1,"search-form",3,"formGroup","keyup.enter"],["appearance","outline"],["matSuffix",""],["matInput","","type","text","formControlName","search"]],template:function(n,r){1&n&&(e.TgZ(0,"form",0),e.NdJ("keyup.enter",function(){return r.handleEnter()}),e.TgZ(1,"mat-form-field",1)(2,"mat-icon",2),e._uU(3),e.qZA(),e._UZ(4,"input",3),e.qZA()()),2&n&&(e.Q6J("formGroup",r.searchForm),e.xp6(3),e.Oqu(r.icon||"search"),e.xp6(1),e.uIk("placeholder",r.placeholder||"search a photo..."))},dependencies:[l.Hw,m.KE,m.R9,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u,I.Nt],encapsulation:2,changeDetection:0}),o})();var d=t(8317),c=t(9671),f=t(7296);function J(o,a){if(1&o&&(e.ynx(0),e.TgZ(1,"app-photo-list-item",4)(2,"div",5)(3,"p")(4,"mat-icon",6),e._uU(5,"favorite"),e.qZA(),e._uU(6),e.qZA()()(),e.BQk()),2&o){const n=a.$implicit;e.xp6(1),e.Q6J("photo_url",n.urls.small)("photo_description",n.alt_description)("routerLink","/collections/photo/"+n.id),e.xp6(5),e.hij(" ",n.likes," likes ")}}let A=(()=>{class o{constructor(n,r){this.store=n,this.headerService=r,this.results$=this.store.pipe((0,u.Ys)(v.pF.dP))}ngOnInit(){this.subscribeHeaderListener()}handleSearch(n){this.store.dispatch(p.PC.newSearch({searchKey:n}))}subscribeHeaderListener(){this.headerService.searchChanged.subscribe(n=>{this.handleSearch(n)})}onScrollDown(){this.results$.pipe((0,g.q)(1),(0,y.h)(n=>!!n?.length)).subscribe(()=>this.store.dispatch(p.PC.loadMoreSearchItems()))}}return o.\u0275fac=function(n){return new(n||o)(e.Y36(u.yh),e.Y36(x.r))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-search"]],decls:5,vars:5,consts:[[1,"layout-container"],[3,"newSearch"],["fxLayout.sm","column","fxLayout.gt-sm","row wrap","infiniteScroll","",1,"gallery",3,"infiniteScrollDistance","infiniteScrollThrottle","scrolled"],[4,"ngFor","ngForOf"],["fxFlex","","fxFlex.gt-sm","28","fxFlex.gt-lg","20",3,"photo_url","photo_description","routerLink"],["fxLayout","row","fxLayoutAlign","end","fxLayoutGap","12px"],["inline",""]],template:function(n,r){1&n&&(e.TgZ(0,"div",0)(1,"app-search-input",1),e.NdJ("newSearch",function(D){return r.handleSearch(D)}),e.qZA(),e.TgZ(2,"div",2),e.NdJ("scrolled",function(){return r.onScrollDown()}),e.YNc(3,J,7,4,"ng-container",3),e.ALo(4,"async"),e.qZA()()),2&n&&(e.xp6(2),e.Q6J("infiniteScrollDistance",1)("infiniteScrollThrottle",2e3),e.xp6(1),e.Q6J("ngForOf",e.lcZ(4,3,r.results$)))},dependencies:[i.sg,C.o,L,d.rH,l.Hw,c.xw,c.SQ,c.Wh,c.yH,f.Ry,i.Ov],encapsulation:2}),o})();var w=t(5626);const N=[{path:"",component:A,data:{breadcrumb:"search"}}];let O=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[i.ez,w.K,d.Bz.forChild(N),l.Ps,c.ae,f.Rq]}),o})()}}]);